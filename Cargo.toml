[workspace.package]
version = "0.1.0"
edition = "2021"
repository = "https://github.com/NethermindEth/Taiko-Preconf-AVS"
license = "MIT"

[workspace]
members = [
    "node",
    "p2p_node/p2p_network",
    "p2p_node/p2pIntegrationTest",
    "p2p_node/p2p_boot_node",
]
resolver = "2"
default-members = ["node"]

[workspace.dependencies]
alloy = { version = "0.2", features = [
    "full",
    "node-bindings",
    "rlp",
    "rpc-types-beacon",
] }
alloy-rlp = "0.3"
anyhow = "1"
beacon-api-client = { git = "https://github.com/ralexstokes/ethereum-consensus", package = "beacon-api-client", rev = "8fbd8a53dca0170bedeca40a92ee70fd48c4615b"  }
bincode = "1.3"
blst = "0.3"
chrono = "0.4"
clap = "4.5"
discv5 = { version = "0.6.0", features = ["libp2p"] }
dotenv = "0.15"
ecdsa = "0.16"
elliptic-curve = "0.13"
ethereum-consensus = { git = "https://github.com/ralexstokes/ethereum-consensus", package = "ethereum-consensus", rev = "8fbd8a53dca0170bedeca40a92ee70fd48c4615b" }
futures = "0.3.25"
futures-util = "0.3"
hex = "0.4"
http = "1.2"
jsonrpsee = { version = "0.24", features = ["http-client", "server"] }
jsonwebtoken = "9.3"
k256 = "0.13"
lazy_static = "1.4"
libp2p =  { version = "0.54.0", features = ["full", "tcp", "dns", "websocket", "tokio", "identify", "yamux", "noise", "gossipsub"] }
libp2p-mplex = "0.41"
p2p-network = { path = "p2p_node/p2p_network" }
rand = "0.8"
rand_core = "0.6"
reqwest = "0.12"
reth-primitives = { git = "https://github.com/paradigmxyz/reth", rev = "5dd5555c5c7d8e43420e273e7005b8af63a847a5" }
secp256k1 = "0.30"
serde = { version = "1.0", features = ["derive"] }
serde_bytes = "0.11"
serde_json = "1.0"
serde_millis = "0.1.1"
ssz_rs = { git = "https://github.com/ralexstokes/ssz-rs", rev = "84ef2b71aa004f6767420badb42c902ad56b8b72" }
tiny-keccak = "2.0"
tokio = { version = "1.38", features = ["full"] }
tracing = "0.1.40"
tracing-subscriber = "0.3"
tree_hash = "0.6.0"
tree_hash_derive = "0.6.0"
void = "1.0.2"

# TODO: remove when the bug is fixed (https://github.com/ralexstokes/ssz-rs/issues/163)
[patch."https://github.com/ralexstokes/ssz-rs"]
ssz_rs = { git = "https://github.com/noahfigueras/ssz-rs", branch = "partial_merkle_tree" }

[patch.crates-io]
zstd-sys = { git = "https://github.com/gyscos/zstd-rs", tag = "zstd-sys-2.0.9" }

[workspace.lints.rust]
# TODO document public api
# https://github.com/NethermindEth/Taiko-Preconf-AVS/issues/426
#missing_docs = "deny"
# TODO sol! macros use unsafe - check after the alloy update
# https://github.com/NethermindEth/Taiko-Preconf-AVS/issues/425
#unsafe_code = "forbid"

[workspace.lints.clippy]
arithmetic_side_effects = "deny"
cast_lossless = "deny"
cast_possible_truncation = "deny"
cast_possible_wrap = "deny"
cast_precision_loss = "deny"
cast_sign_loss = "deny"
needless_return = "deny"
panicking_overflow_checks = "deny"
unwrap_used = "deny"